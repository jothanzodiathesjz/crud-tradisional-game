<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Bootstrap demo</title>
    <link rel="stylesheet" href="../public/css/register.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">
  </head>
  <body>
    <!-- form register -->
  <section id="main">
    <div class="container">
      <div id="form" class="border rounded-3 form-reg bg-light p-5 d-flex flex-column">
        <h3 class="text-center">Create Acoount</h3>
        <div class="form-floating mb-3">
          <input type="text" class="form-control"  placeholder="Username" name="username" id="username">
          <label for="floatingInput">Username</label>
        </div>
        <div class="form-floating mb-3">
          <input type="password" class="form-control" id="password" placeholder="Password" name="password" >
          <label for="floatingPassword">Password</label>
        </div>
        <div class="form-floating mb-3">
          <input type="email" class="form-control"  placeholder="name@example.com" name="email" id="email">
          <label for="floatingInput">Email address</label>
        </div>
        <button id="myButton" onclick="register()" type="button" class="btn btn-primary">register</button>
      </div>
    </div>
  </section>

  
 <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-A3rJD856KowSb7dwlZdYEkO39Gagi7vIsF0jrRAoQmDKKtQBHUuLZ9AsSv4jD4Xa" crossorigin="anonymous"></script>
 <script>
// untuk enter
document.getElementById("form")
    .addEventListener("keyup", function(event) {
    event.preventDefault();
    if (event.keyCode === 13) {
        document.getElementById("myButton").click();
    }
});

function register(){
  const username =  document.getElementById("username").value;
  const password = document.getElementById("password").value;
  const email = document.getElementById("email").value;
  console.log(username)
  console.log(password)
  console.log(email)
  fetch(
                '/register',
                {
                    method: 'post',
                    headers: {"content-type": "application/json"},
                    body: JSON.stringify({ username: username, password: password, email: email})
                }
            ).then(function (response){
                return  response.json()
            }).then(function (result){
              if(result.statusCode === 200){
                window.location.href = '/login'
              }
              alert(result.message)
            }).catch(function (error){
                console.log(error)
            })
}




 </script>
</body>
</html>